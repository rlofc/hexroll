CtxOriNorth: &CtxOriNorth !jinja "{%if GeomorphContext.Orientation=='r090'%}west{%elif GeomorphContext.Orientation=='r180'%}south{%elif GeomorphContext.Orientation=='r270'%}east{%elif GeomorphContext.Orientation=='r000'%}north{%else%}{{GeomorphContext.Orientation}}{%endif%}"
CtxOriEast: &CtxOriEast !jinja "{%if GeomorphContext.Orientation=='r090'%}north{%elif GeomorphContext.Orientation=='r180'%}west{%elif GeomorphContext.Orientation=='r270'%}south{%elif GeomorphContext.Orientation=='r000'%}east{%else%}{{GeomorphContext.Orientation}}{%endif%}"
CtxOriSouth: &CtxOriSouth !jinja "{%if GeomorphContext.Orientation=='r090'%}east{%elif GeomorphContext.Orientation=='r180'%}north{%elif GeomorphContext.Orientation=='r270'%}west{%elif GeomorphContext.Orientation=='r000'%}south{%else%}{{GeomorphContext.Orientation}}{%endif%}"
CtxOriWest: &CtxOriWest !jinja "{%if GeomorphContext.Orientation=='r090'%}south{%elif GeomorphContext.Orientation=='r180'%}east{%elif GeomorphContext.Orientation=='r270'%}north{%elif GeomorphContext.Orientation=='r000'%}west{%else%}{{GeomorphContext.Orientation}}{%endif%}"

Geomorph:
  OriNorth: !jinja "{%if Orientation=='r090'%}west{%elif Orientation=='r180'%}south{%elif Orientation=='r270'%}east{%elif Orientation=='r000'%}north{%else%}{{Orientation}}{%endif%}"
  OriEast: !jinja "{%if Orientation=='r090'%}north{%elif Orientation=='r180'%}west{%elif Orientation=='r270'%}south{%elif Orientation=='r000'%}east{%else%}{{Orientation}}{%endif%}"
  OriSouth: !jinja "{%if Orientation=='r090'%}east{%elif Orientation=='r180'%}north{%elif Orientation=='r270'%}west{%elif Orientation=='r000'%}south{%else%}{{Orientation}}{%endif%}"
  OriWest: !jinja "{%if Orientation=='r090'%}south{%elif Orientation=='r180'%}east{%elif Orientation=='r270'%}north{%elif Orientation=='r000'%}west{%else%}{{Orientation}}{%endif%}"


GeomorphBlock:
  $extends: Geomorph
  $subclass: !weighted
    - GeomorphBlock1^2
    - GeomorphBlock2^2
    - GeomorphBlock3^2
    - GeomorphBlock11^2
    - GeomorphBlock4


GeomorphCorner:
  $extends: Geomorph
  $subclass: !weighted
    - GeomorphCorner1^7
    - GeomorphCorner3^7
    - GeomorphCorner2


GeomorphCornerEntrance:
  $extends: Geomorph
  $subclass:
    - GeomorphCorner2


GeomorphBorder:
  $extends: Geomorph
  $subclass:
    - GeomorphBorder1
    - GeomorphBorder3
    - GeomorphBorder6
    - GeomorphBorder7


GeomorphBlock1: 
  $extends: GeomorphBlock

  Tile: 
    - center01.png
  Coords:
    - "[(3,3), (7,3), (9,7), (2,6), (2,10),(6,10)]"

  Details: !jinja |


    #### {{Counter+1}} : Corridor

    * There's a {{Door2.Description}} It is leading to the
      room in {{Counter+2}}


    #### {{Counter+2}} : {{Room1.Title}}

    {{Room1.Foreshadow}}

    ##### Doorways

    * __{{OriWest|capitalize}}__ side - {{Door1.Description}}.
    * __{{OriNorth|capitalize}}__ side - {{Door2.Description}}.
    * Next to it there's a {{SecretDoor1.Description}} leading to
      a small chamber.
    * There's a {{SecretDoor2.Description}} on the __{{OriSouth}}__ wall.

    {{Room1.Description}}


    #### {{Counter+3}} : Corridor

    This 80' corridor is leading to a {{Door3.Description}} 
    The door is leading to the {{Room2.Title}}.


    #### {{Counter+4}} : {{Room2.Title}}

    {{Room2.Foreshadow}}

    ##### Doorways 

    * __{{OriEast|capitalize}}__ side - {{Door3.Description}}
    * Theres a {{SecretDoor3.Description}} in the alcove on 
      the {{OriSouth}} wall.

    {{Room2.Description}}


    #### {{Counter+5}} : {{Room3.Title}} 

    {{Room3.Foreshadow}}

    ##### Doorways 

    * __{{OriWest|capitalize}}__ side - {{Door4.Description}}
    * __{{OriNorth|capitalize}}__ side - a {{SecretDoor3.Description}}
    * __{{OriSouth|capitalize}}__ side - a {{Door5.Description}}

    {{Room3.Description}}


    #### {{Counter+6}} : {{Room4.Title}}

    {{Room4.Foreshadow}}

    ##### Doorways

    * __{{OriEast}}__ - {{Door6.Description}}

    {{Room4.Description}}


  $inc:
    $global: Counter
    $value: 6

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation

  Room1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier3
        Ref: !jinja "{{CounterSnapshot + 2}}"
  Room2:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 4}}"
  Room3:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 5}}"
  Room4:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 6}}"

  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"
  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"
  Door3:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"
  Door4:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 5}}"
  Door5:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 5}}"
  Door6:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 6}}"

  SecretDoor1:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"
  SecretDoor2:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"
  SecretDoor3:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"


GeomorphBlock2:
  $extends: GeomorphBlock
  Tile: 
    - center02.png
  Coords:
    - "[(3,1), (4,7), (6,4), (9,8)]"
  Details: !jinja |

    #### {{Counter+1}} : Corridor Door 

    * There's a {{Door1.Description}} 

    #### {{Counter+2}} : Secret doors 

    * There's a {{SecretDoor1.Description}} on the {{OriNorth}} wall.
      The door is a shortcut to a connected corridor.

    * There's another {{SecretDoor2.Description}} on the {{OriNorth}} wall.
      This is the only way into the room at {{Counter+3}}

    * A third {{SecretDoor3.Description}} on the {{OriEast}} wall is 
      connected to the room at {{Counter+4}}

    #### {{Counter+3}} : {{Room1.Title}} 

    {{Room1.Foreshadow}}

    ##### Doorways #####

    * There's a {{SecretDoor2.Description}} on the {{OriSouth}} wall.
      This is the only way in and out of this room.

    {{Room1.Description}}


    #### {{Counter+4}} : {{Room2.Title}} 

    {{Room2.Foreshadow}}

    ##### Doorways #####

    * There's a {{SecretDoor3.Description}} inside the alcove on the {{OriWest}} wall.
    * There's a {{Door2.Description}}.

    {{Room2.Description}}

  $inc:
    $global: Counter
    $value: 4

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation
  Room1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 3}}"
  Room2:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 4}}"
  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"
  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"
  SecretDoor1:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"
  SecretDoor2:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"
  SecretDoor3:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"


GeomorphBlock3: 
  $extends: GeomorphBlock

  Tile: 
    - center03.png
  Coords:
    - "[(3,9), (6,8), (11, 6), (11,11)]"

  Details: !jinja |


    #### {{Counter+1}} : Corridor

    * {{Door1.Description}} It is leading to the
      room in {{Counter+2}}


    #### {{Counter+2}} : {{Room1.Title}}

    {{Room1.Foreshadow}}

    ##### Doorways

    * __{{OriSouth|capitalize}}__ side - {{Door2.Description}}.
    * There's a {{SecretDoor1.Description}} on the __{{OriNorth}}__ wall.

    {{Room1.Description}}


    #### {{Counter+3}} : {{Room2.Title}}

    {{Room2.Foreshadow}}

    ##### Doorways 

    * __{{OriWest|capitalize}}__ side - {{Door3.Description}}

    {{Room2.Description}}


    #### {{Counter+4}} : Secret Door to the corridor

    ##### Doorways 

    * __{{OriWest|capitalize}}__ side - a {{SecretDoor2.Description}}


  $inc:
    $global: Counter
    $value: 4

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation

  Room1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 2}}"
  Room2:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 3}}"

  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"

  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"

  Door3:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 3}}"

  SecretDoor1:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"
  SecretDoor2:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"


GeomorphBlock4: 
  $extends: GeomorphBlock

  Tile: 
    - center04.png
  Coords:
    - "[(3,3), (5,3), (8,3), (3, 6), (7, 6), (10, 6)]"

  Details: !jinja |


    #### {{Counter+1}} : Alcoved Corridor

    * __{{OriWest|capitalize}}__ side - a {{SecretDoor1.Description}} in
      an alcove.
    * __{{OriEast|capitalize}}__ side - a {{SecretDoor2.Description}} in
      an alcove, leading to area {{Counter+2}}.


    #### {{Counter+2}} : {{Room1.Title}}

    {{Room1.Foreshadow}}

    ##### Doorways

    * A {{SecretDoor2.Description}} on the __{{OriWest}}__ wall is the only
      way in.

    {{Room1.Description}}


    #### {{Counter+3}} : Dead End

    #### {{Counter+4}} : {{Room2.Title}}

    {{Room2.Foreshadow}}

    ##### Doorways

    * __{{OriNorth|capitalize}}__ side - a {{Door1.Description}}
    * __{{OriSouth|capitalize}}__ side - a {{Door2.Description}}


    {{Room2.Description}}

    #### {{Counter+5}} : {{Room3.Title}}

    {{Room3.Foreshadow}}

    ##### Doorways

    * __{{OriNorth|capitalize}}__ side - a {{Door3.Description}}
    * __{{OriSouth|capitalize}}__ side - a {{Door4.Description}}


    {{Room3.Description}}

    #### {{Counter+6}} : Alcoved Corridor

    * __{{OriWest|capitalize}}__ side - a {{Door4.Description}} leading
      into area {{Counter+5}}.


  $inc:
    $global: Counter
    $value: 6

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation

  Room1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 2}}"

  Room2:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 4}}"

  Room3:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 5}}"

  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"

  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"

  Door3:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 5}}"

  Door4:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 5}}"

  SecretDoor1:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"

  SecretDoor2:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"


GeomorphBlock11:
  $extends: GeomorphBlock

  Tile: 
    - center11.png
  Coords:
    - "[(4,4), (4,8), (8,5), (11, 1)]"

  Details: !jinja |

    #### {{Counter+1}} : {{Room1.Title}}

    {{Room1.Foreshadow}}

    ##### Doorways

    * __{{OriWest|capitalize}}__ side - a {{Door1.Description}}


    {{Room1.Description}}

    #### {{Counter+2}} : {{Room2.Title}}

    {{Room2.Foreshadow}}

    ##### Doorways

    * __{{OriSouth|capitalize}}__ side - a {{Door2.Description}}


    {{Room2.Description}}
    
    #### {{Counter+3}} : {{Room3.Title}}

    {{Room3.Foreshadow}}

    ##### Doorways

    * __{{OriNorth|capitalize}}__ side - a {{Door3.Description}}
    * __{{OriEast|capitalize}}__ side - a {{Door4.Description}}
    * __{{OriSouth|capitalize}}__ side - a {{Door5.Description}}


    {{Room3.Description}}
    
    #### {{Counter+4}} : {{Room4.Title}}

    {{Room4.Foreshadow}}

    ##### Doorways

    * __{{OriSouth|capitalize}}__ side - a {{Door6.Description}}


    {{Room4.Description}}

  $inc:
    $global: Counter
    $value: 4

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation

  Room1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 1}}"

  Room2:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier2
        Ref: !jinja "{{CounterSnapshot + 2}}"

  Room3:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier3
        Ref: !jinja "{{CounterSnapshot + 3}}"

  Room4:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 4}}"

  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"

  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"

  Door3:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 3}}"

  Door4:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 3}}"

  Door5:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 3}}"

  Door6:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"


GeomorphCorner1:
  $extends: GeomorphCorner
  Tile: 
    - topleft01.png
  Coords:
    - "[(3,3)]"
  Details: !jinja |

    #### {{Counter+1}} : {{Room1.Title}} 

    {{Room1.Foreshadow}}

    ##### Doorways #####

    * __{{OriSouth|capitalize}}__ side  - {{Door1.Description}}
    * __{{OriEast|capitalize}}__ side - {{Door2.Description}} 

    {{Room1.Description}}

  $inc:
    $global: Counter
    $value: 1

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation
  Room1:
    $roll: 
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"
  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"
  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"


GeomorphCorner2:
  $extends: GeomorphCorner
  Entrance:
    $roll:
      $class: DungeonEntrance
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1

  Tile: 
    - topleft02.png
  Coords:
    - "[(3,3),(5,5)]"
  Details: !jinja |

    #### {{Counter+1}} : Dungeon Entrance

    These stairs into the dungeon are {{Entrance.Location}}.


    * {{Room0.Debris.Description}}


    {%if Room0.Key.Active!="!"%}
    * Searching will uncover {{Room0.KeyHide}} holding the {{Room0.Key.Active}}
    {%endif%}


    {%if Room0.Lever.Active!="!"%}
    * Thereâ€™s a {{Room0.Lever.Active}}
    {%endif%}

    #### {{Counter+2}} : Secret Chamber
    
    ##### Doorways #####

    * __{{OriNorth|capitalize}}__ side  - {{SecretDoor1.Description}}

    {{Room1.Description}}

  $inc:
    $global: Counter
    $value: 2

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation

  Room0:
    $roll: 
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 0}}"

  Room1:
    $roll: 
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"

  SecretDoor1:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"


GeomorphCorner3:
  $extends: GeomorphCorner
  Tile: 
    - topleft03.png
  Coords:
    - "[(2,4),(5,5)]"
  Details: !jinja |

    #### {{Counter+1}} : {{Room1.Title}} 

    {{Room1.Foreshadow}}

    ##### Doorways #####

    * __{{OriNorth|capitalize}}__ side  - {{Door1.Description}}
    * __{{OriSouth|capitalize}}__ side - {{Door2.Description}} 

    {{Room1.Description}}
    
    #### {{Counter+2}} : Water Fountain
    
    Clear water are coming out of the wall here.

  $inc:
    $global: Counter
    $value: 2

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation
  Room1:
    $roll: 
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"
  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"
  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"


GeomorphBorder1:
  $extends: GeomorphBorder
  Tile: 
    - topmid01.png
  Coords:
    - "[(3,1),(7,3)]"
  Details: !jinja |

    #### {{Counter+1}} : {{Room1.Title}} 

    {{Room1.Foreshadow}}

    ##### Doorways 

    * __{{OriWest|capitalize}}__ side - {{Door1.Description}}.

    {{Room1.Description}}

    #### {{Counter+2}} : {{Room2.Title}} 

    {{Room2.Foreshadow}}

    ##### Doorways 

    * __{{OriEast|capitalize}}__ side - {{Door2.Description}}.

    {{Room2.Description}}


  $inc:
    $global: Counter
    $value: 2

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - Orientation
  Room1:
    $roll: 
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"
  Room2:
    $roll: 
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 2}}"
  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"
  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"


GeomorphBorder3:
  $extends: GeomorphBorder
  Tile: 
    - topmid03.png
  Coords:
    - "[(2,2), (5,3), (7,1), (10,2), (9,5)]"
  Details: !jinja |

    #### {{Counter+1}} : {{Room1.Title}} 

    {{Room1.Foreshadow}}

    ##### Doorways 

    * __{{OriEast|capitalize}}__ side - {{Door2.Description}}.
    * __{{OriSouth|capitalize}}__ side - {{SecretDoor1.Description}}.

    {{Room1.Description}}

    The secret door on the {{OriSouth}} is leading to a secret chamber:

    {{Room2.Description}}


    #### {{Counter+2}} : Entrance to the {{Room1.Title}} 

    * __{{OriWest|capitalize}}__ side - {{Door2.Description}}.


    #### {{Counter+3}} : Entrance to the {{Room3.Title}} 

    * __{{OriEast|capitalize}}__ side - {{Door3.Description}}.


    #### {{Counter+4}} : {{Room3.Title}} 

    {{Room3.Foreshadow}}

    ##### Doorways 

    * __{{OriWest|capitalize}}__ side - {{Door3.Description}}.
    * __{{OriSouth|capitalize}}__ side - {{Door5.Description}}.

    {{Room3.Description}}

    #### {{Counter+5}} : {{OriSouth|capitalize}} entrance to the {{Room3.Title}} 

    * __{{OriNorth|capitalize}}__ side - {{Door5.Description}}.

  $inc:
    $global: Counter
    $value: 5

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation

  Room1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"

  Room2:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"

  Room3:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 4}}"

  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"
  Door3:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"

  Door5:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 4}}"

  SecretDoor1:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"


GeomorphBorder6:
  $extends: GeomorphBorder
  Tile: 
    - topmid06.png
  Coords:
    - "[(6,4), (3,3), (9,3)]"

  Details: !jinja |

    #### {{Counter+1}} : {{Room1.Title}} 

    {{Room1.Foreshadow}}

    ##### Doorways 

    * __{{OriNorth|capitalize}}__ side - {{Door1.Description}}.
    * __{{OriWest|capitalize}}__ side - {{SecretDoor1.Description}}.
    * __{{OriEast|capitalize}}__ side - {{SecretDoor2.Description}}.

    {{Room1.Description}}

    #### {{Counter+2}} : {{SecretRoom1.Title}} 

    {{SecretRoom1.Foreshadow}}

    ##### Doorways 

    * __{{OriEast|capitalize}}__ side - {{SecretDoor1.Description}}.

    {{SecretRoom1.Description}}
    
    #### {{Counter+3}} : {{SecretRoom2.Title}} 

    {{SecretRoom2.Foreshadow}}

    ##### Doorways 

    * __{{OriEast|capitalize}}__ side - {{SecretDoor2.Description}}.

    {{SecretRoom2.Description}}

  $inc:
    $global: Counter
    $value: 3

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation

  Room1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"

  SecretRoom1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 2}}"

  SecretRoom2:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 3}}"

  Door1:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"

  SecretDoor1:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"

  SecretDoor2:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"


GeomorphBorder7:
  $extends: GeomorphBorder
  Tile: 
    - topmid07.png
  Coords:
    - "[(2,2), (6,4), (10,4)]"

  Details: !jinja |

    #### {{Counter+1}} : {{Room1.Title}} 

    {{Room1.Foreshadow}}

    ##### Doorways 

    * __{{OriSouth|capitalize}}__ side - {{Door2.Description}}.
    * __{{OriEast|capitalize}}__ side - {{SecretDoor1.Description}}.

    {{Room1.Description}}

    The secret door on the {{OriEast}} is leading to a secret chamber:

    {{SecretRoom1.Description}}


    #### {{Counter+2}} : {{Room2.Title}} 

    {{Room2.Foreshadow}}

    ##### Doorways 

    * __{{OriNorth|capitalize}}__ side - {{Door3.Description}}.
    * __{{OriWest|capitalize}}__ side - {{Door4.Description}}.
    * __{{OriEast|capitalize}}__ side - {{SecretDoor2.Description}}.

    {{Room2.Description}}

    #### {{Counter+3}} : {{Room3.Title}} 

    {{Room3.Foreshadow}}

    {{Room3.Description}}

  $inc:
    $global: Counter
    $value: 3

  $context:
    $attr: GeomorphContext
    $values:
      - Counter
      - OriNorth
      - OriWest
      - OriSouth
      - OriEast
      - Orientation

  Room1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"

  SecretRoom1:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 1}}"

  Room2:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 2}}"

  Room3:
    $roll:
      $class: RoomDescription
      $bootstrap:
        CounterSnapshot: !ref Counter
        FeatureLevelClass: !ref DungeonFeatureTier1
        Ref: !jinja "{{CounterSnapshot + 3}}"

  Door2:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriSouth
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"

  Door3:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriNorth
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"

  Door4:
    $roll:
      $class: DungeonDoor
      $bootstrap:
        DoorPosition: *CtxOriWest
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"

  SecretDoor1:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 1}}"

  SecretDoor2:
    $roll:
      $class: DungeonSecretDoor
      $bootstrap:
        DoorPosition: *CtxOriEast
        Ref: !jinja "{{GeomorphContext.Counter + 2}}"


